Ported [lock](https://github.com/kbrsh/lock) in nodejs to golang
